<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.CheckBox?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.Tab?>
<?import javafx.scene.control.TabPane?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.layout.HBox?>

<VBox xmlns="http://javafx.com/javafx/19"
      xmlns:fx="http://javafx.com/fxml/1"
      fx:controller="com.quizclient.controllers.AdminDashboardController"
      styleClass="root"
      spacing="10">

    <!-- Top Bar -->
    <HBox styleClass="top-bar" alignment="CENTER_LEFT" spacing="20">
        <padding><Insets top="10" right="20" bottom="10" left="20"/></padding>
        <Label text="Admin Dashboard" styleClass="header-label"/>
        <javafx.scene.layout.Region HBox.hgrow="ALWAYS"/>
        <Button text="Logout" onAction="#onLogout" styleClass="button, secondary"/>
    </HBox>

    <TabPane tabClosingPolicy="UNAVAILABLE" VBox.vgrow="ALWAYS" style="-fx-padding: 10;">
        <!-- Tab 1: Archives -->
        <Tab text="Student Archives">
            <VBox spacing="10" style="-fx-padding: 20;">
                <HBox spacing="10" alignment="CENTER_LEFT">
                    <Label text="Search Student:"/>
                    <TextField fx:id="searchField" promptText="Enter name..."/>
                    <Button text="Refresh" onAction="#onRefreshArchives"/>
                </HBox>
                <TableView fx:id="archiveTable" VBox.vgrow="ALWAYS">
                    <columns>
                        <TableColumn fx:id="colId" text="ID" prefWidth="50"/>
                        <TableColumn fx:id="colSession" text="Session ID" prefWidth="100"/>
                        <TableColumn fx:id="colStudent" text="Student Name" prefWidth="200"/>
                        <TableColumn fx:id="colScore" text="Score" prefWidth="100"/>
                        <TableColumn fx:id="colDate" text="Date" prefWidth="200"/>
                    </columns>
                     <columnResizePolicy>
                        <TableView fx:constant="CONSTRAINED_RESIZE_POLICY"/>
                    </columnResizePolicy>
                </TableView>
            </VBox>
        </Tab>

        <!-- Tab: Manage Faculty -->
        <Tab text="Manage Faculty">
            <VBox spacing="20" style="-fx-padding: 30;">
                <Label text="Faculty Management" styleClass="title"/>
                <VBox spacing="15" styleClass="card" maxWidth="500">
                     <padding><Insets top="20" right="20" bottom="20" left="20"/></padding>
                     <Label text="Create New Faculty Account" styleClass="subtitle"/>
                     
                     <VBox spacing="5">
                        <Label text="Username:"/>
                        <TextField fx:id="facUsernameField" promptText="e.g. faculty1"/>
                     </VBox>
                     
                     <VBox spacing="5">
                        <Label text="Password:"/>
                        <TextField fx:id="facPasswordField" promptText="Enter password"/>
                     </VBox>

                     <Button text="Create Account" onAction="#onCreateFaculty" styleClass="button, success"/>
                </VBox>
            </VBox>
        </Tab>

        <!-- Tab 2: Rules & Settings -->
        <Tab text="Global Rules">
            <VBox spacing="20" style="-fx-padding: 30;">
                <Label text="Quiz Configuration" styleClass="title"/>
                
                <VBox spacing="10" styleClass="card">
                     <padding><Insets top="20" right="20" bottom="20" left="20"/></padding>
                     
                     <CheckBox fx:id="antiCheatingCheck" text="Enable Anti-Cheating (Tab Switch Detection)" selected="true"/>
                     <Label text="If enabled, students will be disqualified if they switch tabs." style="-fx-text-fill: #636e72; -fx-font-size: 12px;"/>
                     
                     <HBox spacing="10" alignment="CENTER_LEFT" style="-fx-padding: 10 0 0 0;">
                         <Label text="Default Question Count:"/>
                         <TextField fx:id="defCountField" text="10" prefWidth="60"/>
                     </HBox>
                </VBox>

                <Button text="Save Settings" onAction="#onSaveSettings" styleClass="button"/>
            </VBox>
        </Tab>
    </TabPane>
</VBox>
